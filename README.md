# Установка

Из корневой папки проекта пишем:

> **docker-compose up -d**

# Функционал

Все эндпоинты расположены в **localhost:8000/api/**, кроме админки, она через **localhost:8000/admin**

Суперюзер для админки создается изнутри контейнера с джанго-приложением таким образом:

> 1. После сборки и поднятия контейнеров, переходим в контейнер с джанго-приложением:
>
>    **docker exec -it djangoapp bash -l**
>
> 2. Создаем суперюзера:
>
>    **python manage.py createsuperuser**

## API-эндпоинты

### /api/query/

Принимает POST-запросы с шириной, долготой и кадастровым номером. После валидации отправляет их на сторонний сервис, ждет ответа, сохраняет сущность запроса с входными данными плюс статусом True или False и датой создания. Затем происходит редирект в **api/result/{id}/**.

### /api/result/{id}/

GET-запрос, возвращает конкретную сущность кадастрового запроса из БД

### /api/history/{cadastral_number}/

GET-запрос, возвращает историю всех кадастровых запросов по этому номеру начиная с последнего

### /api/ping/

GET-запрос, просто возвращает status: ok и код 200

# Сторонний сервис

В качестве имитации стороннего сервиса используется контейнер с FastAPI-приложением, c единственным POST-эндпоинтом, который принимает ширину, долготу и кадастровый номер(валидируется только тип данных, но не их корректность) и просто случайно генерирует True или False

# Тестирование

Текущая реализация включает в себя только тесты эндпоинтов.
Чтобы их запустить, все остальные контейнеры должны быть подняты, после этого пишем команду:

> **docker-compose -f docker-compose-tests.yml up**

Тесты реализованы с использованием pytest

# Документация

Документация сгенерирована автоматически в сваггере

> **localhost:8000/api/schema**
>
> **localhost:8000/api/docs**
>
> **localhost:8000/api/redoc**
